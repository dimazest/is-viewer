(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(t,e,n){t.exports=n(51)},33:function(t,e,n){},49:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"ui",function(){return et}),n.d(a,"annotations",function(){return nt}),n.d(a,"categoryGroups",function(){return at});n(33);var r=n(0),o=n.n(r),c=n(20),i=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(6),l=n(5),s=n(24),m=n.n(s),v=n(7),d=n(25),b=n(10),p=n(8),f=(n(43),n(19),n(45),n(46),n(47),n(49),n(3)),E=n.n(f),I=n(26),g=n(27),D=n(30),y=n(28),h=n(31),O=[];var w=function(t){function e(){return Object(I.a)(this,e),Object(D.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=function(){window.twttr.ready().then(function(e){var n=e.widgets,a=t.props,r=a.id,o=a.options;n.createTweet(r,t._div,o)})};if(window.twttr)e();else{var n=window.location.protocol.indexOf("file")>=0?this.props.protocol:"";!function(t,e){if(0===O.length){O.push(e);var n=document.createElement("script");n.setAttribute("src",t),n.onload=function(){return O.forEach(function(t){return t()})},document.body.appendChild(n)}else O.push(e)}("".concat(n,"//platform.twitter.com/widgets.js"),e)}}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:this.props.className,ref:function(e){t._div=e}})}}]),e}(o.a.Component);w.defaultProps={protocol:"https:",options:{},className:null};var j=w,N=n(1),A=function(t){return function(e,n){var a=n(),r=E.a.get(a,["annotations",t]);if(!r.payload)return fetch(r.url).then(function(t){return t.json()}).then(function(n){return e(function(t,e){return{type:"ANNOTATION_RECEIVED",annotationID:t,payload:e}}(t,Object(N.a)({},n,{events:new Map(n.events.map(function(t){return[t.eventid,Object(N.a)({},t,{tweets:t.tweets.map(function(t){return Object(N.a)({},t,{categories:new Set(t.categories)})})})]})),annotator:Object(N.a)({},n.annotator,{eventsAnnotated:new Map(n.annotator.eventsAnnotated.map(function(t){return[t.identifier,t]}))})})))})}},T=function(t,e){return{type:"EVENT_SELECTED",annotationID:t,eventID:e}},x=n(29),C=n(11),S=function(t){var e=t.annotations,n=t.ui;return E.a.get(e,[n.annotationID,"payload","annotator","eventsAnnotated"],new Map)},_=function(t){return t.ui.annotationID},k=function(t){return t.annotations},R=function(t){return E.a.get(k(t),[_(t)],{})},G=function(t){var e=t.ui;return E.a.get(e,["byAnnotation",e.annotationID,"eventID"])},L=function(t){var e=t.ui;return E.a.get(e,["byAnnotation",e.annotationID,"runID"])},W=Object(C.a)([S],function(t){return Object(b.a)(t).map(function(t){var e=Object(p.a)(t,2),n=(e[0],e[1]);return[n.identifier,n.name]})}),M=Object(C.a)([k],function(t){return Object.entries(t).map(function(t){var e=Object(p.a)(t,2);return[e[0],e[1].title]})}),V=Object(C.a)([function(t){var e=t.annotations,n=t.ui;return E.a.get(e,[n.annotationID,"payload","events"],new Map)},G],function(t,e){return(t.get(e)||{}).tweets||[{}]}),B=function(t){var e=_(t),n=G(t),a=V(t),r=E.a.get(t,["ui","byAnnotation",e,"byEvent",n],{}).tweetIndex||0;return{hasPrevious:r>0,hasNext:r<a.length-1,total:a.length,tweetIndex:r}},U=function(t){return V(t)[B(t).tweetIndex]||{}},P=function(t){return R(t).runs[L(t)]||{}},J=function(t){var e=R(t).datasetTopicMapping[G(t)];return(P(t).payload||{})[e]||{}};var q=Object(C.a)([V,J,P],function(t,e,n){return n.payload?t.reduce(function(t,n){var a=Object(x.a)(t),r=a[0],o=a.slice(1);return[r+(function(t,e){var n=new Set,a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var u=c.value;t.has(u)&&n.add(u)}}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(n.categories,e[n.postID]||new Set).size>0?1:0),r].concat(Object(b.a)(o))},[0]).reverse().slice(1):[null]}),z=function(t){var e=t.title,n=t.onChange,a=t.value,r=t.values;return o.a.createElement("div",{className:"input-group input-group-sm mr-2"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text"},e)),o.a.createElement("select",{className:"custom-select custom-select-sm",onChange:function(t){return n(t.target.value)},value:a},r.map(function(t){var e=Object(p.a)(t,2),n=e[0],a=e[1];return o.a.createElement("option",{value:n,key:n},a)})))},H=function(t){var e=t.annotationID,n=t.eventID,a=t.advanceTweet,r=t.tweetIndex,c=function(t){return function(){return a(e,n,t)}};return o.a.createElement("div",{className:"btn-group",role:"group"},o.a.createElement("button",{type:"button",className:"btn "+(r.hasPrevious?"btn-secondary ":"btn-outline-secondary "),onClick:r.hasPrevious?c(-1):function(){return null}},o.a.createElement("span",{className:"oi oi-media-skip-backward"})),o.a.createElement("button",{type:"button",className:"btn btn-secondary"},r.tweetIndex+1," of ",r.total),o.a.createElement("button",{type:"button",className:"btn "+(r.hasNext?"btn-secondary ":"btn-outline-secondary "),onClick:r.hasNext?c(1):function(){return null}},o.a.createElement("span",{className:"oi oi-media-skip-forward"})))};H=Object(l.b)(function(t){return{annotationID:_(t),eventID:G(t),tweetIndex:B(t)}},function(t){return{advanceTweet:function(e,n,a){return t(function(t,e){return{type:"ADVANCE_TWEET",annotationID:t,eventID:e,by:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}}(e,n,a))}}})(H);var $=function(t){var e=t.tweetIndex,n=t.onChange,a=t.annotationID,r=t.eventID;return o.a.createElement("div",{className:"mx-auto w-25"},o.a.createElement("input",{type:"range",className:"custom-range",min:"0",max:"".concat(e.total-1),value:"".concat(e.tweetIndex),onChange:function(t){return n(a,r,parseInt(t.target.value))}}))};$=Object(l.b)(function(t){return{tweetIndex:B(t),annotationID:_(t),eventID:G(t)}},function(t){return{onChange:function(e,n,a){return t(function(t,e,n){return{type:"SET_TWEET",annotationID:t,eventID:e,index:n}}(e,n,a))}}})($);var F=function(t){var e=t.eventsAnnotatedIdentifierNameItems,n=(t.annotationsIDTitleItems,t.onChangeAnnotation,t.annotationID),a=t.eventID,r=t.onChangeEvent,c=t.runIDTitleItems,i=t.onChangeRun,u=t.runID,l=t.currentBasicScore,s=t.lastBasicScore;return o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-4"},o.a.createElement("span",{className:"navbar-brand h1 mb-0"},"IS"),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapsableContent"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",null,o.a.createElement("div",{className:"collapse navbar-collapse",id:"collapsableContent"},o.a.createElement("form",{className:"form-inline"},!1,e&&o.a.createElement(z,{title:"Event",onChange:function(t){return r(n,t)},value:a,values:e}),e&&o.a.createElement(z,{title:"Run",onChange:function(t){return i(n,t)},value:u,values:[[null,""]].concat(Object(b.a)(c))}),null!==l&&o.a.createElement("div",{className:"input-group input-group-sm mr-2"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text"},"Current score")),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{className:"input-group-text"},l," of ",s)))))),o.a.createElement($,null),o.a.createElement(H,null))};F=Object(l.b)(function(t){return{eventsAnnotatedIdentifierNameItems:W(t),annotationsIDTitleItems:M(t),annotationID:t.ui.annotationID,eventID:G(t),runIDTitleItems:function(t){return Object.entries(R(t).runs).map(function(t){var e=Object(p.a)(t,2),n=e[0],a=e[1];return a.url,[n,a.title]})}(t),runID:L(t),currentBasicScore:function(t){return q(t)[B(t).tweetIndex]}(t),lastBasicScore:function(t){return q(t).slice(-1)[0]}(t)}},function(t){return{onChangeAnnotation:function(e){return t(function(t){return{type:"ANNOTATION_SELECTED",annotationID:t}}(e))},onChangeEvent:function(e,n){return t(T(e,n))},onChangeRun:function(e,n){return t(function(t,e){return{type:"RUN_SELECTED",annotationID:t,runID:e}}(e,n))}}})(F);var K=function(t){var e=t.categoryGroup,n=t.tweet,a=t.runTweetCategories;return o.a.createElement("div",{className:"card mb-4",style:{minWidth:"200px"}},o.a.createElement("div",{className:"card-header"},o.a.createElement("h5",null,e.title)),o.a.createElement("ul",{className:"list-group list-group-flush"},e.categories.map(function(t){var e=n.categories&&n.categories.has(t.id),r=null;return a&&(e=a.has(t.id),r=n.categories&&n.categories.has(t.id)),o.a.createElement("li",{className:"list-group-item "+(e?"text-white bg-secondary ":""),key:t.id},t.title,null!==r&&!(!r&&!e)&&o.a.createElement("span",{className:"badge float-right mr-2 "+(r===e?"badge-success ":"badge-danger")},r===e?"Correct":r?"Missing":"Incorrect"))})))};K=Object(l.b)(function(t){return{tweet:U(t),runTweetCategories:function(t){return J(t)[U(t).postID]}(t)}})(K);var Q=function(t){var e=t.categoryGroups;return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement(K,{categoryGroup:e.request})),o.a.createElement("div",{className:"col"},o.a.createElement(K,{categoryGroup:e.callToAction}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement(K,{categoryGroup:e.report})),o.a.createElement("div",{className:"col"},o.a.createElement(K,{categoryGroup:e.other}))))};Q=Object(l.b)(function(t){return{categoryGroups:t.categoryGroups}})(Q);var X=function(t){var e=t.eventInfo;return o.a.createElement("div",null,o.a.createElement("h5",{className:"mt-5"},"Event description"),o.a.createElement("p",{dangerouslySetInnerHTML:{__html:E.a.get(e,"description")}}))};X=Object(l.b)(function(t){return{eventInfo:function(t){var e=S(t),n=G(t);return e.get(n)}(t)}})(X);var Y=function(t){var e=t.tweet;return o.a.createElement("div",{key:"tweet-".concat(e.postID)},e&&o.a.createElement(j,{id:e.postID}))};Y=Object(l.b)(function(t){return{tweet:U(t)}})(Y);var Z=function(){return o.a.createElement("div",null,o.a.createElement(F,null),o.a.createElement("main",{className:"container-fluid",role:"main"},o.a.createElement("div",{className:"row mx-1"},o.a.createElement("div",{className:"col jumbotron mx-auto",style:{minWidth:"300px",maxWidth:"500px"}},o.a.createElement(Y,null),o.a.createElement(X,null)),o.a.createElement("div",{className:"col jumbotron ml-2"},o.a.createElement(Q,null)))))},tt=n(4),et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ANNOTATION_SELECTED":return Object(N.a)({},t,{annotationID:e.annotationID});case"EVENT_SELECTED":return Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(tt.a)({},e.annotationID,Object(N.a)({},t.byAnnotation[e.annotationID],{eventID:e.eventID})))});case"RUN_SELECTED":return Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(tt.a)({},e.annotationID,Object(N.a)({},t.byAnnotation[e.annotationID],{runID:e.runID})))});case"ADVANCE_TWEET":var n=Object(N.a)({},t.byAnnotation[e.annotationID].byEvent||{});return n[e.eventID]=Object(N.a)({},n[e.eventID],{tweetIndex:((n[e.eventID]||{}).tweetIndex||0)+e.by}),Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(tt.a)({},e.annotationID,Object(N.a)({},t.byAnnotation[e.annotationID],{byEvent:n})))});case"SET_TWEET":var a=Object(N.a)({},t.byAnnotation[e.annotationID].byEvent||{});return a[e.eventID]=Object(N.a)({},a[e.eventID],{tweetIndex:e.index}),Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(tt.a)({},e.annotationID,Object(N.a)({},t.byAnnotation[e.annotationID],{byEvent:a})))});default:return t}},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ANNOTATION_RECEIVED":return Object(N.a)({},t,Object(tt.a)({},e.annotationID,Object(N.a)({},t[e.annotationID]||{},{payload:e.payload})));case"RUN_RECEIVED":return Object(N.a)({},t,Object(tt.a)({},e.annotationID,Object(N.a)({},t[e.annotationID],{runs:Object(N.a)({},t[e.annotationID].runs,Object(tt.a)({},e.runID,Object(N.a)({},t[e.annotationID].runs[e.runID],{payload:e.payload})))})));default:return t}},at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return t},rt=[Object(v.observer)(function(t){return t.ui.annotationID},function(t,e,n){t(A(e))}),Object(v.observer)(function(t){return{annotationID:_(t),annotation:R(t),eventID:G(t)}},function(t,e,n){var a=e.annotationID,r=e.annotation,o=e.eventID;r.payload&&!o&&t(T(a,r.payload.events[0].eventid))}),Object(v.observer)(function(t){return{annotationID:_(t),runID:L(t),runURL:P(t).url}},function(t,e,n){t(function(t,e,n){return function(a,r){return fetch(n).then(function(t){return t.text()}).then(function(r){var o={},c=!0,i=!1,u=void 0;try{for(var l,s=r.split("\n")[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var m=l.value;if(""!==m){var v=m.split(/\s+/);if(v.length<7){console.log(v),console.log("Could not read line in ".concat(n,": ").concat(m));break}var d=v[0],b=v[2],p=v[5].split("-")[1];o[d]||(o[d]={}),o[d][b]||(o[d][b]=new Set),o[d][b].add(p)}}}catch(f){i=!0,u=f}finally{try{c||null==s.return||s.return()}finally{if(i)throw u}}a(function(t,e,n){return{type:"RUN_RECEIVED",annotationID:t,runID:e,payload:n}}(t,e,o))})}}(e.annotationID,e.runID,e.runURL))})],ot=Object(u.c)(a),ct=window._state,it=Object(u.d)(ot,ct,Object(u.a)(d.a,m.a));window.store=it,Object(v.observe)(it,rt),it.dispatch(A(ct.ui.annotationID)),i.a.render(o.a.createElement(l.a,{store:it},o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[32,2,1]]]);
//# sourceMappingURL=main.aafd8dbf.chunk.js.map