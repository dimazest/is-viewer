(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(t,e,n){t.exports=n(46)},28:function(t,e,n){},44:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"ui",function(){return L}),n.d(a,"annotations",function(){return P});n(28);var o=n(0),r=n.n(o),i=n(15),c=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(4),s=n(5),u=n(19),m=n.n(u),d=n(7),v=n(20),p=n(24),f=n(10),E=(n(38),n(14),n(40),n(41),n(42),n(44),n(3)),b=n.n(E),h=n(21),g=n(22),I=n(25),D=n(23),N=n(26),w=[];var O=function(t){function e(){return Object(h.a)(this,e),Object(I.a)(this,Object(D.a)(e).apply(this,arguments))}return Object(N.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=function(){window.twttr.ready().then(function(e){var n=e.widgets,a=t.props.id;t._div.innerHTML='\n                    <blockquote class="twitter-tweet card-blockquote" data-dnt="true">\n                        <div class="card custom-tweet">\n                            <div class="card-block">\n                                <header>\n                                    <p class="twitter-user-name">'.concat(t.props.user_name,'</p>\n                                        <small class="text-muted">@').concat(t.props.screen_name,'</small>\n                                </header>\n                                            <blockquote class="card-blockquote">\n                                                <p dir="ltr" lang="').concat(t.props.lang,'" class="card-text">\n                                                    ').concat(t.props.text,'\n                                                </p>\n                                                    <small>\n                                                        <a href="https://twitter.com/').concat(t.props.screen_name,"/status/").concat(a,'">').concat(t.props.created_at,"</a>\n                                                    </small>\n                                            </blockquote>\n                            </div>\n                        </div>\n                    </blockquote>\n                "),n.load(t._div)})};if(window.twttr)e();else{var n=window.location.protocol.indexOf("file")>=0?this.props.protocol:"";!function(t,e){if(0===w.length){w.push(e);var n=document.createElement("script");n.setAttribute("src",t),n.onload=function(){return w.forEach(function(t){return t()})},document.body.appendChild(n)}else w.push(e)}("".concat(n,"//platform.twitter.com/widgets.js"),e)}}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:this.props.className,ref:function(e){t._div=e}})}}]),e}(r.a.Component);O.defaultProps={protocol:"https:",options:{},className:null};var y=O,j=n(2),A=function(t){return function(e,n){var a=n(),o=b.a.get(a,["annotations",t]);if(!o.payload)return fetch(o.url).then(function(t){return t.json()}).then(function(n){return e(function(t,e){return{type:"ANNOTATION_RECEIVED",annotationID:t,payload:e}}(t,Object(j.a)({},n,{events:new Map(n.events.map(function(t){return[t.eventid,t]})),annotator:Object(j.a)({},n.annotator,{eventsAnnotated:new Map(n.annotator.eventsAnnotated.map(function(t){return[t.identifier,t]}))})})))})}},C=function(t,e){return{type:"EVENT_SELECTED",annotationID:t,eventID:e}},k=function(t){var e=t.title,n=t.onChange,a=t.value,o=t.values;return r.a.createElement("div",{className:"input-group input-group-sm mr-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},e)),r.a.createElement("select",{className:"custom-select custom-select-sm",onChange:function(t){return n(t.target.value)},value:a},o.map(function(t){var e=Object(f.a)(t,2),n=e[0],a=e[1];return r.a.createElement("option",{value:n,key:n},a)})))},T=function(t){var e=t.annotations,n=t.onChangeAnnotation,a=t.annotationID,o=t.eventID,i=t.onChangeEvent,c=Object(p.a)(b.a.get(e,[a,"payload","annotator","eventsAnnotated"],[])).map(function(t){var e=Object(f.a)(t,2),n=(e[0],e[1]);return[n.identifier,n.name]});return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-4"},r.a.createElement("span",{className:"navbar-brand h1 mb-0"},"Incident Streams"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("form",{className:"form-inline"},r.a.createElement(k,{title:"Annotation",onChange:function(t){return n(t)},value:a,values:Object.entries(e).map(function(t){var e=Object(f.a)(t,2);return[e[0],e[1].title]})}),c&&r.a.createElement(k,{title:"Event",onChange:function(t){return i(a,t)},value:o,values:c}))))};T=Object(s.b)(function(t){return{annotations:t.annotations,annotationID:t.ui.annotationID,eventID:t.ui.eventIDbyAnnotationID[t.ui.annotationID]}},function(t){return{onChangeAnnotation:function(e){return t(function(t){return{type:"ANNOTATION_SELECTED",annotationID:t}}(e))},onChangeEvent:function(e,n){return t(C(e,n))}}})(T);var _=function(t){var e=t.title,n=t.categories;return r.a.createElement("div",{className:"card mb-4",style:{minWidth:"200px"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",null,e)),r.a.createElement("ul",{className:"list-group list-group-flush"},n.map(function(t){return r.a.createElement("li",{className:"list-group-item",key:t},t)})))},x=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(_,{title:"Request",categories:["Goods and Services","Search and Rescue","Information Wanted"]})),r.a.createElement("div",{className:"col"},r.a.createElement(_,{title:"Call to Action",categories:["Volunteer","Donations","Move People"]}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(_,{title:"Report",categories:["First Party Observation","Third Party Observation","Weather","Emerging Threats","Significant Event Change","Multimedia Share","Service Available","Factoid","Official","Clenaup","Hashtags"]})),r.a.createElement("div",{className:"col"},r.a.createElement(_,{title:"Other",categories:["Past News","Continuing News","Advice","Sentiment","Discussion","Irrelevant","Unknown","Known already"]}))))},S=function(t){var e=t.annotationID,n=t.eventID,a=t.annotations,o=b.a.get(a,[e,"payload","annotator","eventsAnnotated"],new Map).get(n);return r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"Event description"),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:b.a.get(o,"description")}}))};S=Object(s.b)(function(t){return{annotationID:t.ui.annotationID,eventID:t.ui.eventIDbyAnnotationID[t.ui.annotationID],annotations:t.annotations}})(S);var M=function(t){var e=t.annotationID,n=t.eventID,a=t.annotations,o=(((b.a.get(a,[e,"payload","events"],new Map).get(n)||{}).tweets||[{}])[0]||{}).postID;return r.a.createElement("div",{key:"tweet-".concat(o)},o&&r.a.createElement(y,{id:o}))};M=Object(s.b)(function(t){return{annotationID:t.ui.annotationID,eventID:t.ui.eventIDbyAnnotationID[t.ui.annotationID],annotations:t.annotations}})(M);var q=function(){return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("main",{className:"container-fluid",role:"main"},r.a.createElement("div",{className:"row mx-1"},r.a.createElement("div",{className:"col jumbotron mx-auto",style:{minWidth:"300px",maxWidth:"500px"}},r.a.createElement(M,null),r.a.createElement(S,null)),r.a.createElement("div",{className:"col jumbotron ml-2"},r.a.createElement(x,null)))),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"text-muted"},"Navigatoin trough the stream."))))},W=n(8),L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ANNOTATION_SELECTED":return Object(j.a)({},t,{annotationID:e.annotationID});case"EVENT_SELECTED":return Object(j.a)({},t,{eventIDbyAnnotationID:Object(j.a)({},t.eventIDbyAnnotationID,Object(W.a)({},e.annotationID,e.eventID))});default:return t}},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ANNOTATION_RECEIVED":return Object(j.a)({},t,Object(W.a)({},e.annotationID,Object(j.a)({},t[e.annotationID]||{},{payload:e.payload})));default:return t}},R=[Object(d.observer)(function(t){return t.ui.annotationID},function(t,e,n){t(A(e))}),Object(d.observer)(function(t){return{annotationID:t.ui.annotationID,annotation:t.annotations[t.ui.annotationID],eventIDforAnnotation:t.ui.eventIDbyAnnotationID[t.ui.annotationID]}},function(t,e,n){var a=e.annotationID,o=e.annotation,r=e.eventIDforAnnotation;o.payload&&!r&&t(C(a,o.payload.events[0].eventid))})],V=Object(l.c)(a),H=window._state,B=Object(l.d)(V,H,Object(l.a)(v.a,m.a));window.store=B,Object(d.observe)(B,R),B.dispatch(A(H.ui.annotationID)),c.a.render(r.a.createElement(s.a,{store:B},r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.371205c1.chunk.js.map