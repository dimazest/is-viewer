(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(t,n,e){t.exports=e(47)},29:function(t,n,e){},45:function(t,n,e){},47:function(t,n,e){"use strict";e.r(n);var a={};e.r(a),e.d(a,"ui",function(){return Y}),e.d(a,"annotations",function(){return Z}),e.d(a,"categoryGroups",function(){return tt});e(29);var o=e(0),r=e.n(o),c=e(17),i=e.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=e(6),l=e(5),s=e(21),m=e.n(s),v=e(7),d=e(22),b=e(10),f=e(8),p=(e(39),e(16),e(41),e(42),e(43),e(45),e(3)),E=e.n(p),I=e(23),D=e(24),g=e(26),y=e(25),h=e(27),O=[];var j=function(t){function n(){return Object(I.a)(this,n),Object(g.a)(this,Object(y.a)(n).apply(this,arguments))}return Object(h.a)(n,t),Object(D.a)(n,[{key:"componentDidMount",value:function(){var t=this,n=function(){window.twttr.ready().then(function(n){var e=n.widgets,a=t.props,o=a.id,r=a.options;e.createTweet(o,t._div,r)})};if(window.twttr)n();else{var e=window.location.protocol.indexOf("file")>=0?this.props.protocol:"";!function(t,n){if(0===O.length){O.push(n);var e=document.createElement("script");e.setAttribute("src",t),e.onload=function(){return O.forEach(function(t){return t()})},document.body.appendChild(e)}else O.push(n)}("".concat(e,"//platform.twitter.com/widgets.js"),n)}}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:this.props.className,ref:function(n){t._div=n}})}}]),n}(r.a.Component);j.defaultProps={protocol:"https:",options:{},className:null};var w=j,N=e(1),A=function(t){return function(n,e){var a=e(),o=E.a.get(a,["annotations",t]);if(!o.payload)return fetch(o.url).then(function(t){return t.json()}).then(function(e){return n(function(t,n){return{type:"ANNOTATION_RECEIVED",annotationID:t,payload:n}}(t,Object(N.a)({},e,{events:new Map(e.events.map(function(t){return[t.eventid,Object(N.a)({},t,{tweets:t.tweets.map(function(t){return Object(N.a)({},t,{categories:new Set(t.categories)})})})]})),annotator:Object(N.a)({},e.annotator,{eventsAnnotated:new Map(e.annotator.eventsAnnotated.map(function(t){return[t.identifier,t]}))})})))})}},T=function(t,n){return{type:"EVENT_SELECTED",annotationID:t,eventID:n}},C=e(12),x=function(t){var n=t.annotations,e=t.ui;return E.a.get(n,[e.annotationID,"payload","annotator","eventsAnnotated"],new Map)},_=function(t){return t.ui.annotationID},k=function(t){return t.annotations},R=function(t){return E.a.get(k(t),[_(t)],{})},S=function(t){var n=t.ui;return E.a.get(n,["byAnnotation",n.annotationID,"eventID"])},G=function(t){var n=t.ui;return E.a.get(n,["byAnnotation",n.annotationID,"runID"])},L=Object(C.a)([x],function(t){return Object(b.a)(t).map(function(t){var n=Object(f.a)(t,2),e=(n[0],n[1]);return[e.identifier,e.name]})}),W=Object(C.a)([k],function(t){return Object.entries(t).map(function(t){var n=Object(f.a)(t,2);return[n[0],n[1].title]})}),V=Object(C.a)([function(t){var n=t.annotations,e=t.ui;return E.a.get(n,[e.annotationID,"payload","events"],new Map)},S],function(t,n){return(t.get(n)||{}).tweets||[{}]}),M=function(t){var n=_(t),e=S(t),a=V(t),o=E.a.get(t,["ui","byAnnotation",n,"byEvent",e],{}).tweetIndex||0;return{hasPrevious:o>0,hasNext:o<a.length-1,total:a.length,tweetIndex:o}},U=function(t){return V(t)[M(t).tweetIndex]||{}},P=function(t){return R(t).runs[G(t)]||{a:1}},B=function(t){var n=t.title,e=t.onChange,a=t.value,o=t.values;return r.a.createElement("div",{className:"input-group input-group-sm mr-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},n)),r.a.createElement("select",{className:"custom-select custom-select-sm",onChange:function(t){return e(t.target.value)},value:a},o.map(function(t){var n=Object(f.a)(t,2),e=n[0],a=n[1];return r.a.createElement("option",{value:e,key:e},a)})))},J=function(t){var n=t.annotationID,e=t.eventID,a=t.advanceTweet,o=t.tweetIndex,c=function(t){return function(){return a(n,e,t)}};return r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{type:"button",className:"btn "+(o.hasPrevious?"btn-secondary ":"btn-outline-secondary "),onClick:o.hasPrevious?c(-1):function(){return null}},r.a.createElement("span",{className:"oi oi-media-skip-backward"})),r.a.createElement("button",{type:"button",className:"btn btn-secondary"},o.tweetIndex+1," of ",o.total),r.a.createElement("button",{type:"button",className:"btn "+(o.hasNext?"btn-secondary ":"btn-outline-secondary "),onClick:o.hasNext?c(1):function(){return null}},r.a.createElement("span",{className:"oi oi-media-skip-forward"})))};J=Object(l.b)(function(t){return{annotationID:_(t),eventID:S(t),tweetIndex:M(t)}},function(t){return{advanceTweet:function(n,e,a){return t(function(t,n){return{type:"ADVANCE_TWEET",annotationID:t,eventID:n,by:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}}(n,e,a))}}})(J);var q=function(t){var n=t.tweetIndex,e=t.onChange,a=t.annotationID,o=t.eventID;return r.a.createElement("div",{className:"mx-auto w-25"},r.a.createElement("input",{type:"range",className:"custom-range",min:"0",max:"".concat(n.total-1),value:"".concat(n.tweetIndex),onChange:function(t){return e(a,o,parseInt(t.target.value))}}))};q=Object(l.b)(function(t){return{tweetIndex:M(t),annotationID:_(t),eventID:S(t)}},function(t){return{onChange:function(n,e,a){return t(function(t,n,e){return{type:"SET_TWEET",annotationID:t,eventID:n,index:e}}(n,e,a))}}})(q);var H=function(t){var n=t.eventsAnnotatedIdentifierNameItems,e=(t.annotationsIDTitleItems,t.onChangeAnnotation,t.annotationID),a=t.eventID,o=t.onChangeEvent,c=t.runIDTitleItems,i=t.onChangeRun,u=t.runID;return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-4"},r.a.createElement("span",{className:"navbar-brand h1 mb-0"},"IS"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapsableContent"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",null,r.a.createElement("div",{className:"collapse navbar-collapse",id:"collapsableContent"},r.a.createElement("form",{className:"form-inline"},!1,n&&r.a.createElement(B,{title:"Event",onChange:function(t){return o(e,t)},value:a,values:n}),n&&r.a.createElement(B,{title:"Run",onChange:function(t){return i(e,t)},value:u,values:[[null,""]].concat(Object(b.a)(c))})))),r.a.createElement(q,null),r.a.createElement(J,null))};H=Object(l.b)(function(t){return{eventsAnnotatedIdentifierNameItems:L(t),annotationsIDTitleItems:W(t),annotationID:t.ui.annotationID,eventID:S(t),runIDTitleItems:function(t){return Object.entries(R(t).runs).map(function(t){var n=Object(f.a)(t,2),e=n[0],a=n[1];return a.url,[e,a.title]})}(t),runID:G(t)}},function(t){return{onChangeAnnotation:function(n){return t(function(t){return{type:"ANNOTATION_SELECTED",annotationID:t}}(n))},onChangeEvent:function(n,e){return t(T(n,e))},onChangeRun:function(n,e){return t(function(t,n){return{type:"RUN_SELECTED",annotationID:t,runID:n}}(n,e))}}})(H);var $=function(t){var n=t.categoryGroup,e=t.tweet,a=t.runTweetCategories;return r.a.createElement("div",{className:"card mb-4",style:{minWidth:"200px"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",null,n.title)),r.a.createElement("ul",{className:"list-group list-group-flush"},n.categories.map(function(t){var n=e.categories&&e.categories.has(t.id),o=null;return a&&(n=a.has(t.id),o=e.categories&&e.categories.has(t.id)),r.a.createElement("li",{className:"list-group-item "+(n?"text-white bg-secondary ":""),key:t.id},t.title,null!==o&&!(!o&&!n)&&r.a.createElement("span",{className:"badge float-right mr-2 "+(o===n?"badge-success ":"badge-danger")},o===n?"Correct":"Incorrect"))})))};$=Object(l.b)(function(t){return{tweet:U(t),runTweetCategories:function(t){var n=R(t).datasetTopicMapping[S(t)];return((P(t).payload||{})[n]||{})[U(t).postID]}(t)}})($);var z=function(t){var n=t.categoryGroups;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement($,{categoryGroup:n.request})),r.a.createElement("div",{className:"col"},r.a.createElement($,{categoryGroup:n.callToAction}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement($,{categoryGroup:n.report})),r.a.createElement("div",{className:"col"},r.a.createElement($,{categoryGroup:n.other}))))};z=Object(l.b)(function(t){return{categoryGroups:t.categoryGroups}})(z);var F=function(t){var n=t.eventInfo;return r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"Event description"),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:E.a.get(n,"description")}}))};F=Object(l.b)(function(t){return{eventInfo:function(t){var n=x(t),e=S(t);return n.get(e)}(t)}})(F);var K=function(t){var n=t.tweet;return r.a.createElement("div",{key:"tweet-".concat(n.postID)},n&&r.a.createElement(w,{id:n.postID}))};K=Object(l.b)(function(t){return{tweet:U(t)}})(K);var Q=function(){return r.a.createElement("div",null,r.a.createElement(H,null),r.a.createElement("main",{className:"container-fluid",role:"main"},r.a.createElement("div",{className:"row mx-1"},r.a.createElement("div",{className:"col jumbotron mx-auto",style:{minWidth:"300px",maxWidth:"500px"}},r.a.createElement(K,null),r.a.createElement(F,null)),r.a.createElement("div",{className:"col jumbotron ml-2"},r.a.createElement(z,null)))),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"text-muted"},"Navigatoin trough the stream."))))},X=e(4),Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ANNOTATION_SELECTED":return Object(N.a)({},t,{annotationID:n.annotationID});case"EVENT_SELECTED":return Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(X.a)({},n.annotationID,Object(N.a)({},t.byAnnotation[n.annotationID],{eventID:n.eventID})))});case"RUN_SELECTED":return Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(X.a)({},n.annotationID,Object(N.a)({},t.byAnnotation[n.annotationID],{runID:n.runID})))});case"ADVANCE_TWEET":var e=Object(N.a)({},t.byAnnotation[n.annotationID].byEvent||{});return e[n.eventID]=Object(N.a)({},e[n.eventID],{tweetIndex:((e[n.eventID]||{}).tweetIndex||0)+n.by}),Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(X.a)({},n.annotationID,Object(N.a)({},t.byAnnotation[n.annotationID],{byEvent:e})))});case"SET_TWEET":var a=Object(N.a)({},t.byAnnotation[n.annotationID].byEvent||{});return a[n.eventID]=Object(N.a)({},a[n.eventID],{tweetIndex:n.index}),Object(N.a)({},t,{byAnnotation:Object(N.a)({},t.byAnnotation,Object(X.a)({},n.annotationID,Object(N.a)({},t.byAnnotation[n.annotationID],{byEvent:a})))});default:return t}},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ANNOTATION_RECEIVED":return Object(N.a)({},t,Object(X.a)({},n.annotationID,Object(N.a)({},t[n.annotationID]||{},{payload:n.payload})));case"RUN_RECEIVED":return Object(N.a)({},t,Object(X.a)({},n.annotationID,Object(N.a)({},t[n.annotationID],{runs:Object(N.a)({},t[n.annotationID].runs,Object(X.a)({},n.runID,Object(N.a)({},t[n.annotationID].runs[n.runID],{payload:n.payload})))})));default:return t}},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return t},nt=[Object(v.observer)(function(t){return t.ui.annotationID},function(t,n,e){t(A(n))}),Object(v.observer)(function(t){return{annotationID:_(t),annotation:R(t),eventID:S(t)}},function(t,n,e){var a=n.annotationID,o=n.annotation,r=n.eventID;o.payload&&!r&&t(T(a,o.payload.events[0].eventid))}),Object(v.observer)(function(t){return{annotationID:_(t),runID:G(t),runURL:P(t).url}},function(t,n,e){t(function(t,n,e){return function(a,o){return fetch(e).then(function(t){return t.text()}).then(function(o){var r={},c=!0,i=!1,u=void 0;try{for(var l,s=o.split("\n")[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var m=l.value;if(""!==m){var v=m.split(/\s+/);if(v.length<7){console.log(v),console.log("Could not read line in ".concat(e,": ").concat(m));break}var d=v[0],b=v[2],f=v[5].split("-")[1];r[d]||(r[d]={}),r[d][b]||(r[d][b]=new Set),r[d][b].add(f)}}}catch(p){i=!0,u=p}finally{try{c||null==s.return||s.return()}finally{if(i)throw u}}a(function(t,n,e){return{type:"RUN_RECEIVED",annotationID:t,runID:n,payload:e}}(t,n,r))})}}(n.annotationID,n.runID,n.runURL))})],et=Object(u.c)(a),at=window._state,ot=Object(u.d)(et,at,Object(u.a)(d.a,m.a));window.store=ot,Object(v.observe)(ot,nt),ot.dispatch(A(at.ui.annotationID)),i.a.render(r.a.createElement(l.a,{store:ot},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.634ced5a.chunk.js.map