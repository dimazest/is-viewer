(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(t,e,n){t.exports=n(47)},29:function(t,e,n){},45:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"ui",function(){return K}),n.d(a,"annotations",function(){return Q}),n.d(a,"categoryGroups",function(){return U});n(29);var o=n(0),r=n.n(o),c=n(16),i=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(6),l=n(3),s=n(20),m=n.n(s),v=n(8),d=n(21),b=n(9),p=(n(39),n(15),n(41),n(42),n(43),n(45),n(4)),f=n.n(p),E=n(22),I=n(23),g=n(26),y=n(24),h=n(27),D=[];var w=function(t){function e(){return Object(E.a)(this,e),Object(g.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(I.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=function(){window.twttr.ready().then(function(e){var n=e.widgets,a=t.props,o=a.id,r=a.options;n.createTweet(o,t._div,r)})};if(window.twttr)e();else{var n=window.location.protocol.indexOf("file")>=0?this.props.protocol:"";!function(t,e){if(0===D.length){D.push(e);var n=document.createElement("script");n.setAttribute("src",t),n.onload=function(){return D.forEach(function(t){return t()})},document.body.appendChild(n)}else D.push(e)}("".concat(n,"//platform.twitter.com/widgets.js"),e)}}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:this.props.className,ref:function(e){t._div=e}})}}]),e}(r.a.Component);w.defaultProps={protocol:"https:",options:{},className:null};var N=w,O=n(1),j=function(t){return function(e,n){var a=n(),o=f.a.get(a,["annotations",t]);if(!o.payload)return fetch(o.url).then(function(t){return t.json()}).then(function(n){return e(function(t,e){return{type:"ANNOTATION_RECEIVED",annotationID:t,payload:e}}(t,Object(O.a)({},n,{events:new Map(n.events.map(function(t){return[t.eventid,Object(O.a)({},t,{tweets:t.tweets.map(function(t){return Object(O.a)({},t,{categories:new Set(t.categories)})})})]})),annotator:Object(O.a)({},n.annotator,{eventsAnnotated:new Map(n.annotator.eventsAnnotated.map(function(t){return[t.identifier,t]}))})})))})}},A=function(t,e){return{type:"EVENT_SELECTED",annotationID:t,eventID:e}},x=n(25),T=n(11),C=function(t){var e=t.annotations,n=t.ui;return f.a.get(e,[n.annotationID,"payload","annotator","eventsAnnotated"],new Map)},k=function(t){return t.ui.annotationID},_=function(t){var e=t.ui;return e.byAnnotation[e.annotationID].eventID},G=Object(T.a)([C],function(t){return Object(x.a)(t).map(function(t){var e=Object(b.a)(t,2),n=(e[0],e[1]);return[n.identifier,n.name]})}),S=Object(T.a)([function(t){return t.annotations}],function(t){return Object.entries(t).map(function(t){var e=Object(b.a)(t,2);return[e[0],e[1].title]})}),W=Object(T.a)([function(t){var e=t.annotations,n=t.ui;return f.a.get(e,[n.annotationID,"payload","events"],new Map)},_],function(t,e){return(t.get(e)||{}).tweets||[{}]}),M=function(t){var e=k(t),n=_(t),a=W(t),o=f.a.get(t,["ui","byAnnotation",e,"byEvent",n],{}).tweetIndex||0;return{hasPrevious:o>0,hasNext:o<a.length-1,total:a.length,tweetIndex:o}},V=function(t){return W(t)[M(t).tweetIndex]||{}},L=function(t){var e=t.title,n=t.onChange,a=t.value,o=t.values;return r.a.createElement("div",{className:"input-group input-group-sm mr-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},e)),r.a.createElement("select",{className:"custom-select custom-select-sm",onChange:function(t){return n(t.target.value)},value:a},o.map(function(t){var e=Object(b.a)(t,2),n=e[0],a=e[1];return r.a.createElement("option",{value:n,key:n},a)})))},P=function(t){var e=t.annotationID,n=t.eventID,a=t.advanceTweet,o=t.tweetIndex,c=function(t){return function(){return a(e,n,t)}};return r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{type:"button",className:"btn "+(o.hasPrevious?"btn-secondary ":"btn-outline-secondary "),onClick:o.hasPrevious?c(-1):function(){return null}},r.a.createElement("span",{className:"oi oi-media-skip-backward"})),r.a.createElement("button",{type:"button",className:"btn btn-secondary"},o.tweetIndex+1," of ",o.total),r.a.createElement("button",{type:"button",className:"btn "+(o.hasNext?"btn-secondary ":"btn-outline-secondary "),onClick:o.hasNext?c(1):function(){return null}},r.a.createElement("span",{className:"oi oi-media-skip-forward"})))};P=Object(l.b)(function(t){return{annotationID:k(t),eventID:_(t),tweetIndex:M(t)}},function(t){return{advanceTweet:function(e,n,a){return t(function(t,e){return{type:"ADVANCE_TWEET",annotationID:t,eventID:e,by:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}}(e,n,a))}}})(P);var B=function(t){var e=t.tweetIndex,n=t.onChange,a=t.annotationID,o=t.eventID;return r.a.createElement("div",{className:"mx-auto w-25"},r.a.createElement("input",{type:"range",className:"custom-range",min:"0",max:"".concat(e.total-1),value:"".concat(e.tweetIndex),onChange:function(t){return n(a,o,parseInt(t.target.value))}}))};B=Object(l.b)(function(t){return{tweetIndex:M(t),annotationID:k(t),eventID:_(t)}},function(t){return{onChange:function(e,n,a){return t(function(t,e,n){return{type:"SET_TWEET",annotationID:t,eventID:e,index:n}}(e,n,a))}}})(B);var J=function(t){var e=t.eventsAnnotatedIdentifierNameItems,n=t.annotationsIDTitleItems,a=t.onChangeAnnotation,o=t.annotationID,c=t.eventID,i=t.onChangeEvent;return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-4"},r.a.createElement("span",{className:"navbar-brand h1 mb-0"},"IS"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapsableContent"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",null,r.a.createElement("div",{className:"collapse navbar-collapse",id:"collapsableContent"},r.a.createElement("form",{className:"form-inline"},r.a.createElement(L,{title:"Annotation",onChange:function(t){return a(t)},value:o,values:n}),e&&r.a.createElement(L,{title:"Event",onChange:function(t){return i(o,t)},value:c,values:e})))),r.a.createElement(B,null),r.a.createElement(P,null))};J=Object(l.b)(function(t){return{eventsAnnotatedIdentifierNameItems:G(t),annotationsIDTitleItems:S(t),annotationID:t.ui.annotationID,eventID:_(t)}},function(t){return{onChangeAnnotation:function(e){return t(function(t){return{type:"ANNOTATION_SELECTED",annotationID:t}}(e))},onChangeEvent:function(e,n){return t(A(e,n))}}})(J);var R=function(t){var e=t.categoryGroup,n=t.tweet;return r.a.createElement("div",{className:"card mb-4",style:{minWidth:"200px"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",null,e.title)),r.a.createElement("ul",{className:"list-group list-group-flush"},e.categories.map(function(t){return r.a.createElement("li",{className:"list-group-item "+(n.categories&&n.categories.has(t.id)?"text-white bg-secondary ":""),key:t.id},t.title)})))};R=Object(l.b)(function(t){return{tweet:V(t)}})(R);var q=function(t){var e=t.categoryGroups;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(R,{categoryGroup:e.request})),r.a.createElement("div",{className:"col"},r.a.createElement(R,{categoryGroup:e.callToAction}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(R,{categoryGroup:e.report})),r.a.createElement("div",{className:"col"},r.a.createElement(R,{categoryGroup:e.other}))))};q=Object(l.b)(function(t){return{categoryGroups:t.categoryGroups}})(q);var H=function(t){var e=t.eventInfo;return r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"Event description"),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:f.a.get(e,"description")}}))};H=Object(l.b)(function(t){return{eventInfo:function(t){var e=C(t),n=_(t);return e.get(n)}(t)}})(H);var $=function(t){var e=t.tweet;return r.a.createElement("div",{key:"tweet-".concat(e.postID)},e&&r.a.createElement(N,{id:e.postID}))};$=Object(l.b)(function(t){return{tweet:V(t)}})($);var z=function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement("main",{className:"container-fluid",role:"main"},r.a.createElement("div",{className:"row mx-1"},r.a.createElement("div",{className:"col jumbotron mx-auto",style:{minWidth:"300px",maxWidth:"500px"}},r.a.createElement($,null),r.a.createElement(H,null)),r.a.createElement("div",{className:"col jumbotron ml-2"},r.a.createElement(q,null)))),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"text-muted"},"Navigatoin trough the stream."))))},F=n(5),K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ANNOTATION_SELECTED":return Object(O.a)({},t,{annotationID:e.annotationID});case"EVENT_SELECTED":return Object(O.a)({},t,{byAnnotation:Object(O.a)({},t.byAnnotation,Object(F.a)({},e.annotationID,Object(O.a)({},t.byAnnotation[e.annotationID],{eventID:e.eventID})))});case"ADVANCE_TWEET":var n=Object(O.a)({},t.byAnnotation[e.annotationID].byEvent||{});return n[e.eventID]=Object(O.a)({},n[e.eventID],{tweetIndex:((n[e.eventID]||{}).tweetIndex||0)+e.by}),Object(O.a)({},t,{byAnnotation:Object(O.a)({},t.byAnnotation,Object(F.a)({},e.annotationID,Object(O.a)({},t.byAnnotation[e.annotationID],{byEvent:n})))});case"SET_TWEET":var a=Object(O.a)({},t.byAnnotation[e.annotationID].byEvent||{});return a[e.eventID]=Object(O.a)({},a[e.eventID],{tweetIndex:e.index}),Object(O.a)({},t,{byAnnotation:Object(O.a)({},t.byAnnotation,Object(F.a)({},e.annotationID,Object(O.a)({},t.byAnnotation[e.annotationID],{byEvent:a})))});default:return t}},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ANNOTATION_RECEIVED":return Object(O.a)({},t,Object(F.a)({},e.annotationID,Object(O.a)({},t[e.annotationID]||{},{payload:e.payload})));default:return t}},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return t},X=[Object(v.observer)(function(t){return t.ui.annotationID},function(t,e,n){t(j(e))}),Object(v.observer)(function(t){return{annotationID:t.ui.annotationID,annotation:t.annotations[t.ui.annotationID],eventID:_(t)}},function(t,e,n){var a=e.annotationID,o=e.annotation,r=e.eventID;o.payload&&!r&&t(A(a,o.payload.events[0].eventid))})],Y=Object(u.c)(a),Z=window._state,tt=Object(u.d)(Y,Z,Object(u.a)(d.a,m.a));window.store=tt,Object(v.observe)(tt,X),tt.dispatch(j(Z.ui.annotationID)),i.a.render(r.a.createElement(l.a,{store:tt},r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.196a4890.chunk.js.map