(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(47)},29:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"ui",function(){return K}),n.d(a,"annotations",function(){return U});n(29);var o=n(0),r=n.n(o),i=n(16),c=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(5),u=n(4),s=n(20),m=n.n(s),v=n(8),d=n(21),f=n(9),b=(n(39),n(15),n(41),n(42),n(43),n(45),n(3)),p=n.n(b),E=n(22),I=n(23),h=n(26),g=n(24),N=n(27),D=[];var w=function(e){function t(){return Object(E.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(){window.twttr.ready().then(function(t){var n=t.widgets,a=e.props,o=a.id,r=a.options;n.createTweet(o,e._div,r)})};if(window.twttr)t();else{var n=window.location.protocol.indexOf("file")>=0?this.props.protocol:"";!function(e,t){if(0===D.length){D.push(t);var n=document.createElement("script");n.setAttribute("src",e),n.onload=function(){return D.forEach(function(e){return e()})},document.body.appendChild(n)}else D.push(t)}("".concat(n,"//platform.twitter.com/widgets.js"),t)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.className,ref:function(t){e._div=t}})}}]),t}(r.a.Component);w.defaultProps={protocol:"https:",options:{},className:null};var y=w,O=n(1),j=function(e){return function(t,n){var a=n(),o=p.a.get(a,["annotations",e]);if(!o.payload)return fetch(o.url).then(function(e){return e.json()}).then(function(n){return t(function(e,t){return{type:"ANNOTATION_RECEIVED",annotationID:e,payload:t}}(e,Object(O.a)({},n,{events:new Map(n.events.map(function(e){return[e.eventid,e]})),annotator:Object(O.a)({},n.annotator,{eventsAnnotated:new Map(n.annotator.eventsAnnotated.map(function(e){return[e.identifier,e]}))})})))})}},A=function(e,t){return{type:"EVENT_SELECTED",annotationID:e,eventID:t}},C=n(25),T=n(11),x=function(e){var t=e.annotations,n=e.ui;return p.a.get(t,[n.annotationID,"payload","annotator","eventsAnnotated"],new Map)},k=function(e){return e.ui.annotationID},S=function(e){var t=e.ui;return t.byAnnotation[t.annotationID].eventID},_=Object(T.a)([x],function(e){return Object(C.a)(e).map(function(e){var t=Object(f.a)(e,2),n=(t[0],t[1]);return[n.identifier,n.name]})}),W=Object(T.a)([function(e){return e.annotations}],function(e){return Object.entries(e).map(function(e){var t=Object(f.a)(e,2);return[t[0],t[1].title]})}),M=Object(T.a)([function(e){var t=e.annotations,n=e.ui;return p.a.get(t,[n.annotationID,"payload","events"],new Map)},S],function(e,t){return(e.get(t)||{}).tweets||[{}]}),P=function(e){var t=k(e),n=S(e),a=M(e),o=p.a.get(e,["ui","byAnnotation",t,"byEvent",n],{}).tweetIndex||0;return{hasPrevious:o>0,hasNext:o<a.length,total:a.length,tweetIndex:o}},V=function(e){var t=e.title,n=e.onChange,a=e.value,o=e.values;return r.a.createElement("div",{className:"input-group input-group-sm mr-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},t)),r.a.createElement("select",{className:"custom-select custom-select-sm",onChange:function(e){return n(e.target.value)},value:a},o.map(function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement("option",{value:n,key:n},a)})))},L=function(e){var t=e.eventsAnnotatedIdentifierNameItems,n=e.annotationsIDTitleItems,a=e.onChangeAnnotation,o=e.annotationID,i=e.eventID,c=e.onChangeEvent;return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-4"},r.a.createElement("span",{className:"navbar-brand h1 mb-0"},"Incident Streams"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("form",{className:"form-inline"},r.a.createElement(V,{title:"Annotation",onChange:function(e){return a(e)},value:o,values:n}),t&&r.a.createElement(V,{title:"Event",onChange:function(e){return c(o,e)},value:i,values:t}))))};L=Object(u.b)(function(e){return{eventsAnnotatedIdentifierNameItems:_(e),annotationsIDTitleItems:W(e),annotationID:e.ui.annotationID,eventID:S(e)}},function(e){return{onChangeAnnotation:function(t){return e(function(e){return{type:"ANNOTATION_SELECTED",annotationID:e}}(t))},onChangeEvent:function(t,n){return e(A(t,n))}}})(L);var R=function(e){var t=e.title,n=e.categories;return r.a.createElement("div",{className:"card mb-4",style:{minWidth:"200px"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",null,t)),r.a.createElement("ul",{className:"list-group list-group-flush"},n.map(function(e){return r.a.createElement("li",{className:"list-group-item",key:e},e)})))},B=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(R,{title:"Request",categories:["Goods and Services","Search and Rescue","Information Wanted"]})),r.a.createElement("div",{className:"col"},r.a.createElement(R,{title:"Call to Action",categories:["Volunteer","Donations","Move People"]}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(R,{title:"Report",categories:["First Party Observation","Third Party Observation","Weather","Emerging Threats","Significant Event Change","Multimedia Share","Service Available","Factoid","Official","Clenaup","Hashtags"]})),r.a.createElement("div",{className:"col"},r.a.createElement(R,{title:"Other",categories:["Past News","Continuing News","Advice","Sentiment","Discussion","Irrelevant","Unknown","Known already"]}))))},F=function(e){var t=e.eventInfo;return r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"Event description"),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:p.a.get(t,"description")}}))};F=Object(u.b)(function(e){return{eventInfo:function(e){var t=x(e),n=S(e);return t.get(n)}(e)}})(F);var H=function(e){var t=e.tweetID;return r.a.createElement("div",{key:"tweet-".concat(t)},t&&r.a.createElement(y,{id:t}))};H=Object(u.b)(function(e){return{tweetID:function(e){return(M(e)[P(e).tweetIndex]||{}).postID}(e)}})(H);var J=function(e){var t=e.annotationID,n=e.eventID,a=e.advanceTweet,o=e.tweetIndex,i=function(e){return function(){return a(t,n,e)}};return r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{type:"button",className:"btn "+(o.hasPrevious?"btn-secondary ":"btn-outline-secondary "),onClick:o.hasPrevious?i(-1):function(){return null}},r.a.createElement("span",{className:"oi oi-media-skip-backward"})),r.a.createElement("button",{type:"button",className:"btn btn-secondary"},o.tweetIndex+1," of ",o.total),r.a.createElement("button",{type:"button",className:"btn "+(o.hasNext?"btn-secondary ":"btn-outline-secondary "),onClick:o.hasNext?i(1):function(){return null}},r.a.createElement("span",{className:"oi oi-media-skip-forward"})))};J=Object(u.b)(function(e){return{annotationID:k(e),eventID:S(e),tweetIndex:P(e)}},function(e){return{advanceTweet:function(t,n,a){return e(function(e,t){return{type:"ADVANCE_TWEET",annotationID:e,eventID:t,by:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}}(t,n,a))}}})(J);var q=function(){return r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement("main",{className:"container-fluid",role:"main"},r.a.createElement("div",{className:"row mx-1"},r.a.createElement("div",{className:"col jumbotron mx-auto",style:{minWidth:"300px",maxWidth:"500px"}},r.a.createElement(J,null),r.a.createElement(H,null),r.a.createElement(F,null)),r.a.createElement("div",{className:"col jumbotron ml-2"},r.a.createElement(B,null)))),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"text-muted"},"Navigatoin trough the stream."))))},G=n(6),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ANNOTATION_SELECTED":return Object(O.a)({},e,{annotationID:t.annotationID});case"EVENT_SELECTED":return Object(O.a)({},e,{byAnnotation:Object(O.a)({},e.byAnnotation,Object(G.a)({},t.annotationID,Object(O.a)({},e.byAnnotation[t.annotationID],{eventID:t.eventID})))});case"ADVANCE_TWEET":var n=Object(O.a)({},e.byAnnotation[t.annotationID].byEvent||{});return n[t.eventID]=Object(O.a)({},n[t.eventID],{tweetIndex:((n[t.eventID]||{}).tweetIndex||0)+t.by}),Object(O.a)({},e,{byAnnotation:Object(O.a)({},e.byAnnotation,Object(G.a)({},t.annotationID,Object(O.a)({},e.byAnnotation[t.annotationID],{byEvent:n})))});default:return e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ANNOTATION_RECEIVED":return Object(O.a)({},e,Object(G.a)({},t.annotationID,Object(O.a)({},e[t.annotationID]||{},{payload:t.payload})));default:return e}},$=[Object(v.observer)(function(e){return e.ui.annotationID},function(e,t,n){e(j(t))}),Object(v.observer)(function(e){return{annotationID:e.ui.annotationID,annotation:e.annotations[e.ui.annotationID],eventID:S(e)}},function(e,t,n){var a=t.annotationID,o=t.annotation,r=t.eventID;o.payload&&!r&&e(A(a,o.payload.events[0].eventid))})],z=Object(l.c)(a),Q=window._state,X=Object(l.d)(z,Q,Object(l.a)(d.a,m.a));window.store=X,Object(v.observe)(X,$),X.dispatch(j(Q.ui.annotationID)),c.a.render(r.a.createElement(u.a,{store:X},r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.eaf25647.chunk.js.map